<link rel="import" href="dna-router-behaviors.html">

<dom-module id='dna-view'>
	<style>
		:host{
			width: 100%;
			height: auto;
			display: none;
		}
		:host.active{
			display: inline-block;
		}


	</style>
	<template>
		<content></content>
	</template>
</dom-module>

<script>
var P;
(function(){

	Polymer({
		is: 'dna-view',
		properties: {
			state: String,
			template: String,
			element: String,
			active: false,
		},
		behaviors: [DnaViewManagerBehavior],
		on: function(){
			// console.log('yee')
		},
		listeners:{
			'dna-load': '_onload',
			'dna-leave': '_onleave',
		},
	    loadTemp: function(node, param){
	        var self = this;
	        Polymer.Base.importHref(this.template ,function(e){
	            var el = document.createElement(self.element);
	            el.param = null;
	        	node.innerHTML = '';
	            if(param){
	            	el.param = param;
	            }
	            node.appendChild(el)
	        },function(e){
	            console.log(e)
	        });
	    },
		_onload: function(e){
			if(!this.active){
				this.active = true;
				this.toggleClass('active', true);
				var param = null;
				if(e.detail.param)
					param = e.detail.param;
				this.loadTemp(this, param);
			}
		},
		_onleave: function(){
			this.toggleClass('active', false);
			this.active = false;
	        this.innerHTML = '';
		},
		ready: function(){
			P = this;
			// this.go('login')
			var self = this;
			// console.log(this.$.stateProvider.getStates())
		}

	});
})();
</script>